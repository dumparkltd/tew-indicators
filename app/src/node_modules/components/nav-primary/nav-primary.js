var React         = require('react')

//helpers
var _         = require('lodash')

var log       = require('debug')('src:components:nav-primary')

var Grid 				= require('react-bootstrap/lib/Grid')
var Row 				= require('react-bootstrap/lib/Row')
var Col 				= require('react-bootstrap/lib/Col')

module.exports = React.createClass({

  render: function () {
    log('props', this.props)

    return (
    <Grid className='nav-primary'>
      <Row className='nav-primary-row'>
        <Col md={2} className='nav-primary-label'>
          <div>{this.props.label.top}</div>
          <div>{this.props.label.bottom}</div>
        </Col>
        <Col md={10}>
          <ul className="list-inline nav-issue">
            {
              _.map(this.props.items,function (item, i, items) {
                var width = 1/items.length * 100 + '%'
                return (
                  <li
                    onClick={this.handleItemClick(item.slug)}
                    className={item.active ? 'issue active' : 'issue'}
                    style={{width:width}}>
                    <a href='#'>
                      <span className={'icon-'+ item.slug}></span>
                      <div className='title'>{item.title}</div>
                      <div>{item.subtitle}</div>
                    </a>
                  </li>
                )
              },this)
            }
          </ul>
        </Col>
      </Row>
    </Grid>


    )
  },

  handleItemClick: function (slug) {
    return _.bind(function (e) {
      e.preventDefault()
      this.props.flux.actions[this.props.type].select(slug)
    },this)
  }
})
