var React 		= require('react')
var Fluxxor 	= require('fluxxor')
var Router		= require('react-router')
var State  		= Router.State
var FluxMixin = Fluxxor.FluxMixin(React)
var Select 		= require('react-select')

var log 			= require('debug')('src:components:main:index')



module.exports = React.createClass({

	mixins: [
		FluxMixin,
		State
	],


	render: function () {
		var params 	= this.getParams() //not used

		//on render fetch latest data
		var data 		= this.getFlux().stores.ethnicity.query(params)
		log('data', data)

		var options = data.map(function (d) {
			return {
				value: d.id,
				label: d.label
			}
		})

		return (
			<div>
				<Select
					name='select-ethnicity'
					multi={true}
					options={options}
					onChange={this.handleSelectGroup} />
			</div>


		)

	},

	handleSelectGroup: function (groupId) {
		//TODO use props for generic select component
		var groupType = 'ethnicity'

		//TODO grab current query, pass to action, have action create a nested query  object

		// {
		// 	ethnicity: ['m', 'e'],
		// 	age: []
		// }


		var currentQuery = this.getQuery()

		log(groupType, groupId, this.getParams())

		var actions = this.getFlux().actions.group.select(groupType, groupId, currentQuery)



	},

	componentDidMount: function () {

	}




})