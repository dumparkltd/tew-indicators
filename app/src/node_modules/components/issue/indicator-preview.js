var React           = require('react')

var Range = require('./indicator-preview-range')
var Totals = require('./indicator-preview-totals')
var Custom = require('./indicator-preview-custom')

//helpers
var Col 				= require('react-bootstrap/lib/Col')
//var Button 				= require('react-bootstrap/lib/Button')

var log       = require('debug')('src:components:issue:indicator-preview')

module.exports = React.createClass({


  render: function () {    
    
    var title = this.props.title
    var slug = this.props.slug
    var type  = this.props.type    
    
    return (
        <Col xs={12} md={12/this.props.cols}>
          <a href="#" className="indicator-preview-tile" 
             onClick={this.handleIndicatorClick(slug)}>
            <div className={'indicator-preview-header'}>
              <h4>{title}</h4>
            </div>
            <div className={'indicator-preview-main'}>
            { (type === 'range')  
              ? <Range
                  date={this.props.date}
                  data  = {this.props.data}
                /> 
              : (type === 'totals') 
                ? <Totals
                  total={this.props.total}
                  previewfact={this.props.previewfact}
                  date={this.props.date}
                />
                : <Custom
                  previewfact={this.props.previewfact}
                  date={this.props.date}
                />
            }
            </div>
            <div className={'indicator-preview-footer'}>
              Explore
            </div>    
          </a>
        </Col>
    )
  },
  
  

  handleIndicatorClick: function (indicatorSlug) {
    var flux = this.props.flux
    return function (e) {
      e.preventDefault()  
      flux.actions.indicator.select(indicatorSlug)
    }
  }
})
