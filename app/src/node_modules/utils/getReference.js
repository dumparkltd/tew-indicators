var _ = require('lodash')
module.exports = function (data,indicator) {      
    var breakdowns = indicator.breakdowns.split(',') 
    if (indicator.datatype === 'disfactor') {
      return {value:1,
              label:indicator.referencelabel
      }
    } else if (indicator.datatype === 'part-to-whole' && breakdowns.length === 1 && breakdowns[0] === 'sex') {
      return {value:0.5,
              label:indicator.referencelabel}
    } else if (indicator.datatype === 'categorical' || indicator.datatype === 'absolute' || indicator.datatype === 'median') {
      // temporary
      return {value:undefined}
    } else {
      var ref = _.findWhere(
        data,
        _.zipObject(breakdowns,_.fill(Array(breakdowns.length), 'all'))
      )
      if (typeof ref !== 'undefined') {
        ref.label = indicator.referencelabel
      } else {
        ref = {value:undefined}
      }        
      return ref
    }

} 
     
