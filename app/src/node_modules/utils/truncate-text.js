module.exports = function (text, limit, open) {
  var overflowMinimum = 10
  var overflow = false
  var showLink = false
  var truncated = text.split(' ')
  var diff = truncated.length - (limit - overflowMinimum)
  if (diff >= overflowMinimum) {
    showLink = true
    if (!open) {
      overflow = true
      truncated = truncated.slice(0, limit - overflowMinimum).join(' ')
    }
    else {
      truncated = truncated.join(' ')
    }
  }
  else {
    truncated = truncated.join(' ')
  }

  if (overflow) { truncated += ' [&hellip;]' }

  return { text: truncated, showLink: showLink }
}
