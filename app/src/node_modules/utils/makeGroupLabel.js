var _ = require('lodash')

module.exports = function (flux,breakdownIds,datum) {
    var label = ''
    var countall = 0
    _.each(flux.stores.dataBreakdowns.data,function(bd){
     var group = datum[bd.id]
     if (typeof group !== 'undefined' && group !== 'all' && group !== '') {
       if (bd.id === 'age') {
         label += group + ' years '
       } else {
         label += flux.stores.dataGroups.findOne({short:group,breakdown:bd.id}).title + ' '
       }        
     } else if (group === 'all' && breakdownIds.indexOf(bd.id) > -1) {
       countall++
     }

    },this)
    
    if (countall === breakdownIds.length) {
      label = 'All people'
    }
    
    return label;
      
}