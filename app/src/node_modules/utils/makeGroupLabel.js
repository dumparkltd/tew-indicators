var _ = require('lodash')

module.exports = function (flux,breakdownIds,datum) {

    var label = ''
    var countall = 0
    _.each(breakdownIds,function(bdId,index){
     
     var group = datum[bdId]
     if (typeof group !== 'undefined' && group !== 'all' && group !== '') {
       if (index > 0) label += ', '
       if (bdId === 'age') {
         label += group + ' years'
       } else {
         label += flux.stores.dataGroups.findOne({short:group,breakdown:bdId}).title
       }        
     } else if (group === 'all' && breakdownIds.indexOf(bdId) > -1) {
       countall++
     }

    },this)
    
    if (countall === breakdownIds.length) {
      // todo this should check the indicator store
      label = 'All people'
    }
    
    return label;
      
}