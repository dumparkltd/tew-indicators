var _ = require('lodash')
module.exports = function (data,indicator) {      
  var range = {}
  var breakdowns = indicator.breakdowns.split(',')    
  breakdowns = breakdowns[0] === '' ? [] : breakdowns
  if (breakdowns.length > 0) {
    data = 
      _.reject(data, function(d){
          var all = true
          _.each(breakdowns, function(bd){
            if (d[bd] !== 'all') {
              all = false
            }
          })
          return (breakdowns.length === 0) ? false : all
        })
   }
   data = _.sortByOrder(data,['value'],[indicator.order === 'DESC'])

return { top: _.first(data), bottom : _.last(data), order : indicator.order}

} 
     
