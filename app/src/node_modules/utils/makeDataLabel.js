var log = require('debug')('utils/makeDataLabel')
// var numeral = require('numeral')

//NOTE numeraljs has a simpler, flexible number formatting -> http://numeraljs.com/
module.exports = function (value,type,unit,showUnit,inThousands) {
    unit = typeof unit !== 'undefined' ? unit : ''
    showUnit = typeof showUnit !== 'undefined' ? showUnit : true
    inThousands = typeof inThousands !== 'undefined' ? inThousands : false
    type = typeof type !== 'undefined' ? type : ''

    log(value, type, unit, showUnit, inThousands)

    var label
    var thousandsLabel = ''
    if (typeof value === 'number') {
      if (unit === '%') {
        // round to first decimal
        label = (Math.round(value * 1000)/10).toString()

        if(showUnit) { label += unit }

      } else {
        if (inThousands && value > 1000) {
          value = Math.round(value/1000)
          thousandsLabel = 'k'
        }
        if (unit === '$') {
          label = value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + thousandsLabel
          if(showUnit) { label = unit + label }
        } else {
          label = value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + thousandsLabel
        }
      }
    }
    else {
      label = 'No data'
    }
    return label;
}
