var React         = require("react"),
    Router        = require("react-router"),
    Route         = Router.Route,
    DefaultRoute  = Router.DefaultRoute;

var Main          = require('components/main')
var Intro         = require('components/intro')
var Issue         = require('components/issue')
var Indicator     = require('components/indicator')

require('string.prototype.startswith')

//TODO don't duplicate in app.js ???
var subdir = "/tew-indicators/"
var basePath = window.location.pathname.startsWith(subdir) ? subdir : '/'

var routes = (
  <Route path={basePath} handler={Main} name="home" >
    <DefaultRoute handler={Intro} name="intro" />
    <Route path={basePath+"employment"} handler={Issue} name="employment" />
    <Route path={basePath+"discrimination"} handler={Issue} name="discrimination" />
    <Route path={basePath+"pay-gap"} handler={Issue} name="pay-gap" />
    <Route path={basePath+"leadership"} handler={Issue} name="leadership" />
    <Route path={basePath+":issueRoute/indicators/:indicatorRoute"} handler={Indicator} name="indicator" />
  </Route>
);

module.exports = routes;
